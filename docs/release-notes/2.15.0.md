# Percona Monitoring and Management 2.15.0

<table class="docutils field-list" frame="void" rules="none">
  <colgroup>
    <col class="field-name">
    <col class="field-body">
  </colgroup>
  <tbody valign="top">
    <tr class="field-odd field">
      <th class="field-name">Date:</th>
      <td class="field-body">February 23, 2021</td>
    </tr>
    <tr class="field-even field">
      <th class="field-name">Installation:</th>
      <td class="field-body">
        <a class="reference external" href="https://www.percona.com/software/pmm/quickstart">Installing Percona Monitoring and Management</a></td>
    </tr>
  </tbody>
</table>

Percona Monitoring and Management (PMM) is a free and open-source platform for managing and monitoring MySQL, MongoDB, and PostgreSQL performance.

## New Features

* [PMM-7412](https://jira.percona.com/browse/PMM-7412): DBaaS: API endpoint for retrieving cluster creation error logs And API endpoint to get Error logs in a case when DB Cluster creation got an error. For more details check  https://YOUR_PMM_SERVER/swagger/ ......  (Link to the method in API ) (Thanks to Jan Prukner for reporting this issue)
* [PMM-7419](https://jira.percona.com/browse/PMM-7419): DBaaS: Ability to see DB Cluster creation/modification logs Allows the user to see the last logs lines in case of an error that happened during DB Cluster creation  
* [PMM-6797](https://jira.percona.com/browse/PMM-6797): Ability to add HAProxy services (CLI) --  with `pmm-admin [inventory] add [service] haproxy` command ([Read more](../details/commands/pmm-admin.md).)
* [PMM-7496](https://jira.percona.com/browse/PMM-7496): Dashboards: New HAProxy PXC dashboards ([Read more](../details/dashboards/dashboard-haproxy-instance-summary.md). [Demo]().)
* [PMM-7418](https://jira.percona.com/browse/PMM-7418): Security Threat Tool: Ability to disable *all* security checks
* [PMM-7417](https://jira.percona.com/browse/PMM-7417): Security Threat Tool: Show list of all available security checks
* [PMM-7405](https://jira.percona.com/browse/PMM-7405): Check connection response format when adding external agents (BE)
* [PMM-7380](https://jira.percona.com/browse/PMM-7380): Backup: Locations: database model, List locations, Add locations (API) (**Note:** This API is subject to change. It exists in development versions and will not be exposed in future stable versions.)
  
* [PMM-7296](https://jira.percona.com/browse/PMM-7296): Integrated Alerting: Alert Rules pagination (API)
* [PMM-7294](https://jira.percona.com/browse/PMM-7294): Integrated Alerting: Alert Rules pagination (UI) Users are able to use pagination on the Alert Rules page UI.
* [PMM-7181](https://jira.percona.com/browse/PMM-7181): Dashboards: MySQL/MongoDB/PostgreSQL Instance Summary: Add panel with pt-*-summary information
* [PMM-7177](https://jira.percona.com/browse/PMM-7177): Dashboards: New Grafana panel showing all `pt-*-summary` outputs in one place
* [PMM-7123](https://jira.percona.com/browse/PMM-7123): UI: Add `external-serverless` instances ([Read more](../details/commands/pmm-admin.md#other-commands).)
* [PMM-6943](https://jira.percona.com/browse/PMM-6943): UI: Show HAProxy type services in PMM Inventory
* [PMM-6924](https://jira.percona.com/browse/PMM-6924): UI: Show page 'breadcrumbs' on non-dashboard pages
* [PMM-6671](https://jira.percona.com/browse/PMM-6671): UI: adding HAProxy instances
* [PMM-6640](https://jira.percona.com/browse/PMM-6640): Ability to add HAProxy services (API) (Technical Preview)
* [PMM-5778](https://jira.percona.com/browse/PMM-5778): Check connection response format when adding external agents (UI)
* [PMM-4172](https://jira.percona.com/browse/PMM-4172): Ability to execute `pt-mysql-summary` for MySQL service (API) PMM will have an API to get pt-mysql-summary data collected from MySQL instance for later presentation in PMM.
  See the HTTPS:PMM_SERVER/swagger/ URL TO FETHOD for details



## Improvements

* [PMM-6693](https://jira.percona.com/browse/PMM-6693): pmm-managed denies request when using API keys even if the role set is admin -- The PMM API will now accept requests not only with username/password but also with API tokens generated in Grafana. 
* [PMM-7487](https://jira.percona.com/browse/PMM-7487): Check connection to HAProxy services when adding them for monitoring (UI) (Thanks to Jiří Čtvrtka for reporting this issue)
* [PMM-7476](https://jira.percona.com/browse/PMM-7476): CLI: Improve `pmm-admin --help` output, highlight required fields for external services
* [PMM-7473](https://jira.percona.com/browse/PMM-7473): CLI: Review all flags and descriptions for External Services and expand them and add examples PMM admin commands related to external Services monitoring are better described in --help  for cli and in reference documentation https://www.percona.com/doc/percona-monitoring-and-management/2.x/details/commands/pmm-admin.html#other-commands 
* [PMM-7471](https://jira.percona.com/browse/PMM-7471): Software update: VictoriaMetrics 1.52.0 to 1.53.1 We updated all components including vmagent and vmalert  (SEE PMM ARCHITECTURE doc ) to the latest version.
  Read more about changes in Victoriametrics updates in 
  https://github.com/VictoriaMetrics/VictoriaMetrics/releases/tag/v1.53.0
  https://github.com/VictoriaMetrics/VictoriaMetrics/releases/tag/v1.53.1
* [PMM-7433](https://jira.percona.com/browse/PMM-7433): Integrated Alerting: Cleaner rule details in Alert Rules list (FE)
* [PMM-7422](https://jira.percona.com/browse/PMM-7422): Security Threat Tool: View all active and silenced alerts
* [PMM-7331](https://jira.percona.com/browse/PMM-7331): Security Threat Tool: Failed checks have 'Read more' links with helpful content From Now PMM users will be able to start getting links for specific checks with information on what  the user can do with this problem 
* [PMM-7329](https://jira.percona.com/browse/PMM-7329): Security Threat Tool: Hide check results tab if STT is disabled
* [PMM-7328](https://jira.percona.com/browse/PMM-7328): Security Threat Tool: Download and execute checks when activated Checks are now downloaded and run the moment STT is switched on, repeated every 24 hours from there on. (Previously, downloading and running new checks happened every 24 hours but the cycle didn't begin when STT was activated.)
* [PMM-7259](https://jira.percona.com/browse/PMM-7259): Integrated Alerting: 'Alerting is disabled' message gives hint to enable
* [PMM-7257](https://jira.percona.com/browse/PMM-7257): Integrated Alerting: Cleaner rule details in Alert Rules list (BE) and API to expose Expression and real values for the Alert Rule
* [PMM-7240](https://jira.percona.com/browse/PMM-7240): DBaaS: Change from Dashboard to Grafana Page We changed the DBaaS page from a Grafana Dashboard to a Grafana Page to be better aligned with the DBaaS enable/disable status and avoid confusion when DBaaS is not enabled. You can join our DBaaS Preview program  by ___________ (URL to forum ? or blog post)
   
* [PMM-6711](https://jira.percona.com/browse/PMM-6711): Add filter for `external_group` in `pmm-managed` services list (API) Additional filtering for pmm inventory commands to simplify management of external services over API and cli
* [PMM-6695](https://jira.percona.com/browse/PMM-6695): Software update: Grafana 7.1.3 to 7.3.7 The Grafana is updated from 7.1.3 to 7.3.7. 
  This enables PMM users to consume all new GRafana features from https://grafana.com/docs/grafana/latest/whatsnew/whats-new-in-v7-2/  and  https://grafana.com/docs/grafana/latest/whatsnew/whats-new-in-v7-3/
* [PMM-5888](https://jira.percona.com/browse/PMM-5888): CLI: Improve help for adding external service and it's flags This improves ease of use for the External Services monitoring and simplifies adds some of its flags usages
* [PMM-5784](https://jira.percona.com/browse/PMM-5784): Ability to execute `pt-pg-summary` for PostgreSQL service (API) PMM will have an API to get pt-pg-summary data collected from PostgreSQL instance for later presentation in PMM.
  See the HTTPS:PMM_SERVER/swagger/ URL TO FETHOD for details
* [PMM-4679](https://jira.percona.com/browse/PMM-4679): Docker: Tag `pmm-server`, `pmm-client` images with `:latest` Docker images for `pmm-client` and `pmm-server` are tagged `:latest` for the most recent release. **These should not** be used production environments. Instead, use the `:2` tag. ([Read more](../setting-up/server/docker.md#run-pmm-server-as-a-docker-image).)
* [PMM-4306](https://jira.percona.com/browse/PMM-4306): Ability to execute `pt-mongodb-summary` for MongoDB service (API) PMM will have an API to get pt-mongodb-summary data collected from MongoDB instance for later presentation in PMM. 
  See the HTTPS:PMM_SERVER/swagger/ URL TO FETHOD for details  
* [PMM-7472](https://jira.percona.com/browse/PMM-7472): Remove Prometheus datasource -- If you were using custom dashboards with a specified Datasource (not using empty to use default one) you may need to edit your dashboards to use the proper Datasource.
  PMM is no longer using Prometheus but uses compatible storage for metrics from VictoriaMetrics. We renamed the datasource to be more technology-agnostic.



## Bugs Fixed

* [PMM-7343](https://jira.percona.com/browse/PMM-7343): Security Threat Tool: Check results show previously failed checks after STT reenabled
* [PMM-7227](https://jira.percona.com/browse/PMM-7227): Table stats queries accumulating millions of tables
* [PMM-6681](https://jira.percona.com/browse/PMM-6681): Not all PMM admin users can download diagnostic logs, only those with Grafana admin rights
* [PMM-5969](https://jira.percona.com/browse/PMM-5969): CLI: Removing Services or Nodes in force mode does not stop running agents, VictoriaMetrics continues collecting data from exporters
* [PMM-7470](https://jira.percona.com/browse/PMM-7470): IndexStatsCollections is assigned values from wrong flag (Thanks to Tim for reporting this issue)
* [PMM-7349](https://jira.percona.com/browse/PMM-7349): DBaaS: Host and Password occasionally disappearing from Connection column User cannot see Host and Password values in the Connection column sometimes
  
   (Thanks to Beata Handzelova for reporting this issue)
* [PMM-7325](https://jira.percona.com/browse/PMM-7325): Dashboards: MySQL User Details: user labels unreadable with high number (>20) of users In order to show valuable information and being limited by the upstream bug (https://github.com/grafana/grafana/issues/17736) we limited the panel to display the top 10  most active users.  (Thanks to Andrei Fedorov for reporting this issue)
* [PMM-5837](https://jira.percona.com/browse/PMM-5837): Adding PostgreSQL instance with PMM user password containing `=` (equals sign) doesn't work with `pmm-agent` (Thanks to Alexandre Barth for reporting this issue)
* [PMM-7426](https://jira.percona.com/browse/PMM-7426): VictoriaMetrics: `vmagent` continually restarting, blocking comms between `pmm-agent` & `pmm-managed` Customers running multiple services on the same pmm-agent could face this issue. The problem exists during mass adding services or restart when agent registering services. This would impact users will push mode used.
* [PMM-7235](https://jira.percona.com/browse/PMM-7235): Integrated Alerting: Filtered out alerts are shown in the UI as firing Users were confused by the alerts presented on the UI there not configured. There was a but in presenting filtered alerts for UI.
* [PMM-6685](https://jira.percona.com/browse/PMM-6685): UI: Can't access Services submenu Due to UI bug, the hovering to some menu sections was complicated. fixed in the latest grafana version 
* [PMM-7497](https://jira.percona.com/browse/PMM-7497): Security Threat Tool: User with viewer role sees 'STT disabled' instead of 'Insufficient access' (even when STT enabled)
* [PMM-7467](https://jira.percona.com/browse/PMM-7467): Integrated Alerting: `<` (less-than symbol) wrongly processed in Alert templates Custom and Build in Alert rules using "<" weren't working correctly. 
* [PMM-7416](https://jira.percona.com/browse/PMM-7416): Dashboards: Some panels on PostgreSQL Instance Summary are not using selected Database Some panels like Tuple related weren't using DB selected on the PostgreSQL Instance Summary Dashboard.  Dashboard: https://pmmdemo.percona.com/graph/d/postgresql-instance-summary/
* [PMM-7366](https://jira.percona.com/browse/PMM-7366): Integrated Alerting: Inconsistent states of entities (templates, channels, rules)
* [PMM-7250](https://jira.percona.com/browse/PMM-7250): DBaaS: "Cannot get PSMDB/PXC cluster" error appears after removing DB cluster There were confusing errors during the Cluster deletion.
* [PMM-6636](https://jira.percona.com/browse/PMM-6636): Binlog Size not being charted when the instance is MySQL RDS The "Binlog Size" ,  "Binlog Data Written Hourly" and "Node" graphs inside the "MySQL Replication Summary" dashboard is not showing data when the MySQL is an RDS instance.


